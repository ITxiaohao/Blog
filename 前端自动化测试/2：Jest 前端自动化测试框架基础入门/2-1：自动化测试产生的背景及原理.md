---
title: '2-1ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•äº§ç”Ÿçš„èƒŒæ™¯åŠåŸç†'
date: 2019-07-24
permalink: 'test-learn-principle'
---

[lesson1 æºç ]

### æ‰‹å†™æµ‹è¯•ä»£ç 

æ–°å»º index.html æ–‡ä»¶

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>math.js</title>
    <script src="./math.js"></script>
  </head>
  <body></body>
</html>
```

åœ¨ html ä¸­å…¨å±€å¼•å…¥äº† math.js

```js
// math.js
function add(a, b) {
  return a + b
}
function minus(a, b) {
  return a * b // å…ˆå°†è¿™é‡Œå†™ä¸º * ä¸ºäº†æµ‹è¯•é”™è¯¯ä»£ç 
}
```

```js
// math.test.js

var result = add(3, 7)
var expected = 10
if (result !== 10) {
  throw Error(`3 + 7 åº”è¯¥ç­‰äº ${expected}, ä½†ç»“æœå´æ˜¯ ${result}`)
}
var result = minus(3, 3)
var expected = 0
if (result !== 0) {
  throw Error(`3 - 3 åº”è¯¥ç­‰äº ${expected}, ä½†ç»“æœå´æ˜¯ ${result}`)
}
```

ç›®å½•ç»“æ„

```sh
ğŸ“¦lesson1
 â”£ ğŸ“œindex.html
 â”£ ğŸ“œmath.js
 â”— ğŸ“œmath.test.js
```

æ‰“å¼€ç½‘é¡µæ§åˆ¶å°ï¼Œå¤åˆ¶ **math.test.js** çš„ä»£ç ç›´æ¥å›è½¦

![](https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Jest/20190724134500.png)

è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å¯¹ minus è¿›è¡Œä¿®æ”¹ï¼Œæ”¹ä¸º `a - b`ï¼Œé€šè¿‡æµ‹è¯•

![](https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Jest/20190724135045.png)

è¿™æ—¶æˆ‘ä»¬è¦æ–°åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚ **multi**

```js
function multi(a, b) {
  return a * b
}
```

ä½†æ˜¯å¯èƒ½ä¼šä¸å°å¿ƒæŠŠä¹‹å‰çš„ä»£ç ç»™ä¿®æ”¹äº†ï¼Œæ¯”å¦‚åˆšåˆšçš„ minusï¼Œæ”¹ä¸ºäº† `a * b`ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ‹…å¿ƒæ–°åŠ çš„åŠŸèƒ½/æ–¹æ³•ä¼šå¯¹ä¹‹å‰çš„ä»£ç æœ‰å½±å“

æ²¡å…³ç³»ï¼Œåˆšåˆšçš„æµ‹è¯•ç”¨ä¾‹å¯ä»¥æ¥æ£€æµ‹ä¹‹å‰çš„ä»£ç ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Œæ²¡é—®é¢˜å°±è¯´æ˜æ–°åŠ çš„åŠŸèƒ½ä¸ä¼šå¯¹ä¹‹å‰æœ‰å½±å“ï¼Œå¦‚æœæœ‰å°±å°†ä¿®æ”¹çš„åœ°æ–¹æ”¹å›æ¥ï¼Œè¿™å°±æœ‰äº†ä¸€ä¸ª**å›å½’æµ‹è¯•**çš„æ¦‚å¿µã€‚

å¯ä»¥å‘ç°å†™çš„æµ‹è¯•ä»£ç éƒ½æ˜¯**ä¸€ä¸ªå¥—è·¯**ï¼Œå…ˆé¢„æœŸç»“æœæ˜¯ä»€ä¹ˆï¼Œå†è®¡ç®—å‡ºçœŸæ­£çš„ç»“æœï¼Œè¿›è¡Œå¯¹æ¯”ï¼Œæœ€ç»ˆçœ‹å€¼æ˜¯å¦ç›¸ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°æ¥å°è£…ä¹‹å‰çš„æµ‹è¯•ä»£ç ï¼Œç®€åŒ–ä»£ç 

## æ„é€  expect å‡½æ•°

ä¾‹å¦‚ï¼š

```js
function expect(result) {
  return {
    // actual çœŸå®å€¼
    toBe: function(actual) {
      if (result !== actual) {
        throw new Error('é¢„æœŸå€¼å’Œå®é™…å€¼ä¸ç›¸ç­‰')
      }
    }
  }
}

expect(add(3, 7)).toBe(10)
expect(minus(3, 3)).toBe(0)
```

![](https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Jest/20190724134801.png)

å‡å¦‚æˆ‘ä»¬ä¿®æ”¹äº†ä¹‹å‰çš„ **minus**ï¼Œæ”¹ä¸ºäº† `a * b`ï¼Œå°±ä¼šæŠ¥é”™ï¼Œå°±ç®—çŸ¥é“æŠ¥é”™ï¼Œä½†æˆ‘ä»¬åœ¨é”™è¯¯é‡Œå†™æ­»äº†æŠ¥é”™ä¿¡æ¯ï¼Œéƒ½æ˜¯ä¸€æ ·çš„æŠ¥é”™ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±ä¸çŸ¥é“åˆ°åº•æ˜¯ç¬¬ä¸€ä¸ªæµ‹è¯•å‡ºé”™äº†è¿˜æ˜¯ç¬¬äºŒä¸ª

![](https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Jest/20190724134815.png)

## æ„é€  test å‡½æ•°

è¿›ä¸€æ­¥æ”¹è¿› expect å‡½æ•°ï¼Œä½¿ç”¨ **test** å‡½æ•°å°† **expect** ç»™åŒ…è£¹èµ·æ¥

```js
function test(desc, fn) {
  try {
    fn()
    console.log(`${desc} é€šè¿‡æµ‹è¯•`)
  } catch (e) {
    console.log(`${desc} æ²¡æœ‰é€šè¿‡æµ‹è¯•`)
  }
}

test('æµ‹è¯•åŠ æ³• 3 + 7', () => {
  expect(add(3, 7)).toBe(10)
})
test('æµ‹è¯•å‡æ³• 3 - 3', () => {
  expect(minus(3, 3)).toBe(0)
})
```

![](https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Jest/20190724134854.png)

å†è¿›ä¸€æ­¥çš„ä¿®æ”¹ï¼Œè®©å®ƒæç¤ºçš„æ›´å®Œå–„

```js
function expect(result) {
  return {
    toBe: function(actual) {
      if (result !== actual) {
        throw new Error(
          `é¢„æœŸå€¼å’Œå®é™…å€¼ä¸ç›¸ç­‰ é¢„æœŸ ${actual} ç»“æœå´æ˜¯ ${result}`
        )
      }
    }
  }
}
function test(desc, fn) {
  try {
    fn()
    console.log(`${desc} é€šè¿‡æµ‹è¯•`)
  } catch (e) {
    console.log(`${desc} æ²¡æœ‰é€šè¿‡æµ‹è¯•, ${e}`)
  }
}
test('æµ‹è¯•åŠ æ³• 3 + 7', () => {
  expect(add(3, 7)).toBe(10)
})
test('æµ‹è¯•å‡æ³• 3 - 3', () => {
  expect(minus(3, 3)).toBe(0)
})
```

![](https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Jest/20190724134906.png)

:::tip
åˆ°åº•ä»€ä¹ˆæ˜¯å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šå®é™…ä¸Šå°±æ˜¯å†™æµ‹è¯•çš„ js ä»£ç ï¼Œæ¥è¿è¡Œæˆ‘ä»¬å†™çš„ js çš„ä»£ç ï¼Œé¢„æœŸå®ƒçš„ç»“æœå’Œå®ƒå®é™…çš„ç»“æœæ˜¯å¦ç›¸ç­‰ï¼Œè¿™æ ·å°±èƒ½åœ¨å®ƒä¸Šçº¿å‰æå‰è¿›è¡Œæµ‹è¯•

ä¹‹å‰æˆ‘ä»¬å†™çš„ test å’Œ expect åŸºæœ¬ä¸Šå°±æ˜¯ Jest å’Œ Mocha çš„åº•å±‚å®ç°åŸç†
:::
